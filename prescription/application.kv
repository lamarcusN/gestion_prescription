<MyButton@Button>:
    background_color: (0, 0, 0, 0)
    background_normal: ''
    back_color: 0, 0, 0.3, 1
    border_radius: [18]
    bold: True
    font_size: 22
    canvas.before:
        Color:
            rgba: self.back_color
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: self.border_radius


<SelectableLabel>:
    # Draw a background to indicate selection
    canvas.before:
        Color:
            rgba: (.0, 0.9, .1, .3) if self.selected else (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size



<MainWondaw>:
    name: "main"
    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond4_bis1.png'

    # Nombre de section de l'interface principal
    GridLayout:
        rows: 4
        orientation: 'horizontal'
        FloatLayout:
            Button:
                size_hint: .15, .63
                pos_hint:{'x': .05, 'top':.9}
                background_normal: '../image/plus.jpg'
                background_down: ''

            Label:
                text: " [color=#000000][b]G-Prescription[/b][/color] "
                pos_hint:{'center_x': .38, 'center_y':.53}
                font_size: '40sp'
                #size_hint: .40, .80
                markup: True
                #underline: True


            MyButton:
                pos_hint:{'x': .8, 'top':.6}
                size_hint: .15, .25
                text: "s'identifier"
                font_size: 15
                text_color: 0, 51, 255, 0.2
                #on_press: root.connect()


        FloatLayout:
            Label:
                halign: 'center'
                text: "[color=#000000][b]G-Prescription[/b][/color] Vous accompagne \npour vos préscription en toute fiabilité et sécurité"
                color: 0, 0, 0
                markup: True
                pos_hint: {'center_x': 0.5, 'center_y': 0.22}
                font_size: '18sp'

        FloatLayout:
            pos: 10, 50
            MyButton:
                border_radius: [14]
                pos_hint:{'x': .2, 'top':.6}
                size_hint: .25, .35
                text: 'Se renseigner'
                on_press:
                    root.manager.transition.direction = "left"
                    root.manager.transition.duration = 0.01
                    app.root.current = "renseignement"

            MyButton:
                border_radius: [12]
                pos_hint:{'x': .6, 'top':.6}
                size_hint: .25, .35
                text: 'Prescrire'
                id: presc
                on_press:
                    root.manager.transition.direction = "left"
                    root.manager.transition.duration = 0.01
                    app.root.current = "indentification"

        BoxLayout:
            Label:
                text: "[color=#000000][b]G-Prescription[/b][/color]   A votre service"
                color: 0, 0, 0
                font_size: 24
                markup: True

<Identification>:
    name: "indentification"

    ident : ident
    passwd : passwd
    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond4_bis1.png'
    FloatLayout:
        Button:
            size_hint: .13, .13
            pos_hint:{'x': .05, 'top':.95}
            background_normal: '../image/plus.jpg'
            background_down: ''
            on_press :
                root.manager.transition.direction = "right"
                app.root.current = "main"

        Label:
            text: "[color=#000000]Vous êtes médecin ??[/color]"
            color: 0, 0, 0
            markup: True
            pos_hint:{'x': .01, 'top':1.27}
            font_size: '30sp'

        Label:
            text: "[color=#000000]Entrez vos identifiants svp[/color]"
            color: 0, 0, 0
            markup: True
            font_size: '20sp'
            pos_hint:{'x': .01, 'top':1.20}
        TextInput:
            id: ident
            hint_text:'Indentifiant'
            pos_hint: {'center_x': 0.5, 'center_y': 0.58}
            size_hint: 0.30, 0.07
            multiline : False

        TextInput:
            id: passwd
            hint_text:'Mot de passe'
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: 0.30, 0.07
            multiline : False
            password:True
            password_mask : "*"

        MyButton:

            pos_hint:{'x': .35, 'top':.4}
            size_hint: .30, .09
            text: 'Valider'

            on_press:
                root.manager.transition.direction = "left"
                root.checkLogin()
                app.root.current = "recherchePatient"

<Renseignement>:
    name: "renseignement"

    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond4_bis1.png'

    FloatLayout:
        Button:
            size_hint: .13, .13
            pos_hint:{'x': .05, 'top':.95}
            background_normal: '../image/plus.jpg'
            background_down: ''
            on_press :
                root.manager.transition.direction = "right"
                app.root.current = "main"

        MyButton:
            pos_hint:{'x': .08, 'top':.5}
            size_hint: .25, .07
            text: 'Voir un patient'
            on_press:
                root.manager.transition.direction = "left"
                app.root.current = "renseignementPatient"

        MyButton:
            pos_hint:{'x': .38, 'top':.5}
            size_hint: .25, .07
            text: 'Voir un medecin'
            on_press:
                root.manager.transition.direction = "left"
                app.root.current = "renseignementMaladie"

        MyButton:
            pos_hint:{'x': .68, 'top':.5}
            size_hint: .25, .07
            text: 'Voir une maladie'
            on_press:
                root.manager.transition.direction = "left"
                app.root.current = "renseignementMadicament"

# SECTION RENSEIGNEMENT

<RenseignementPatient>:

    name: "renseignementPatient"
    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond4_bis1.png'

    FloatLayout:
        Button:
            size_hint: .13, .13
            pos_hint:{'x': .05, 'top':.95}
            background_normal: '../image/plus.jpg'
            background_down: ''
            on_press :
                root.manager.transition.direction = "right"
                app.root.current = "main"

        Label:
            text: "[color=#000000][b]Recherche patient[/b][/color]"
            color: 0, 0, 0
            markup: True
            pos_hint:{'x': .01, 'center_y':0.77}
            font_size: '30sp'

        TextInput:
            id: input
            hint_text:'Renseignement sur un patient'
            pos_hint: {'center_x': 0.5, 'center_y': 0.63}
            size_hint: 0.40, 0.07
            multiline : False
            write_tab: False
            on_text:
                rv.update_Data(self.text)
        RV:
            id: rv
            pos_hint: {'center_x': .8, 'center_y': 0.91}
            viewclass: 'SelectableLabel'
            SelectableBoxLayout:
                default_size: None, dp(30)
                default_size_hint: .4, None
                orientation: 'vertical'
                multiselect: False
                touch_multiselect: True


<RenseignementMaladie>:

    name: "renseignementMaladie"
    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond4_bis1.png'

    FloatLayout:
        Button:
            size_hint: .13, .13
            pos_hint:{'x': .05, 'top':.95}
            background_normal: '../image/plus.jpg'
            background_down: ''
            on_press :
                root.manager.transition.direction = "right"
                app.root.current = "main"

        Label:
            text: "[color=#000000][b]Renseignement Maladie[/b][/color]"
            color: 0, 0, 0
            markup: True
            pos_hint:{'x': .01, 'center_y':0.77}
            font_size: '30sp'

        TextInput:
            id: input
            hint_text:'Renseignement sur un patient'
            pos_hint: {'center_x': 0.5, 'center_y': 0.63}
            size_hint: 0.40, 0.07
            multiline : False
            write_tab: False
            on_text:
                rv.update_Data(self.text)
        RV:
            id: rv
            pos_hint: {'center_x': .8, 'center_y': 0.91}
            viewclass: 'SelectableLabel'
            SelectableBoxLayout:
                default_size: None, dp(30)
                default_size_hint: .4, None
                orientation: 'vertical'
                multiselect: False
                touch_multiselect: True


<RenseignementMadicament>:

    name: "renseignementMadicament"
    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond4_bis1.png'

    FloatLayout:
        Button:
            size_hint: .13, .13
            pos_hint:{'x': .05, 'top':.95}
            background_normal: '../image/plus.jpg'
            background_down: ''
            on_press :
                root.manager.transition.direction = "right"
                app.root.current = "main"

        Label:
            text: "[color=#000000][b]Renseignement Maladie[/b][/color]"
            color: 0, 0, 0
            markup: True
            pos_hint:{'x': .01, 'center_y':0.77}
            font_size: '30sp'

        TextInput:
            id: input
            hint_text:'Renseignement sur un patient'
            pos_hint: {'center_x': 0.5, 'center_y': 0.63}
            size_hint: 0.40, 0.07
            multiline : False
            write_tab: False
            on_text:
                rv.update_Data(self.text)
        RV:
            id: rv
            pos_hint: {'center_x': .8, 'center_y': 0.91}
            viewclass: 'SelectableLabel'
            SelectableBoxLayout:
                default_size: None, dp(30)
                default_size_hint: .4, None
                orientation: 'vertical'
                multiselect: False
                touch_multiselect: True





<RecherchePatient>:
    name: "recherchePatient"
    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond4_bis1.png'
    FloatLayout:
        Button:
            size_hint: .13, .13
            pos_hint:{'x': .05, 'top':.95}
            background_normal: '../image/plus.jpg'
            background_down: ''
            on_press :
                root.manager.transition.direction = "right"
                app.root.current = "main"
        Label:
            text: "[color=#000000][b]Recherche patient[/b][/color]"
            color: 0, 0, 0
            markup: True
            pos_hint:{'x': .01, 'center_y':0.77}
            font_size: '30sp'

        TextInput:
            id: input
            hint_text:'Rechercher le patient'
            pos_hint: {'center_x': 0.7, 'center_y': 0.63}
            size_hint: 0.40, 0.07
            multiline : False
            write_tab: False
            on_text:
                rv.update_Data(self.text)
        RV:
            id: rv
            pos_hint: {'center_x': 1., 'center_y': 0.9}
            viewclass: 'SelectableLabel'
            SelectableBoxLayout:
                default_size: None, dp(30)
                default_size_hint: .4, None
                orientation: 'vertical'
                multiselect: False
                touch_multiselect: True

        TextInput:
            id: input
            hint_text:'Nom'
            write_tab: False
            pos_hint: {'center_x': 0.2, 'center_y': 0.63}
            size_hint: 0.30, 0.07
            multiline : False

        TextInput:
            id: input1
            hint_text:'Prenom'
            write_tab: False
            pos_hint: {'center_x': 0.2, 'center_y': 0.55}
            size_hint: 0.30, 0.07
            multiline : False

        MyButton:
            pos_hint:{'x': .15, 'top':.2}
            size_hint: .30, .07
            text: 'Valider'
            bold: True

            on_press: app.root.current = "constat"

        MyButton:

            pos_hint:{'x': .60, 'top':.2}
            size_hint: .30, .07
            text: 'Ajouter patient'
            on_press:
                root.manager.transition.direction = "left"
                app.root.current = "addPatient"


<AddPatient>:
    name: "addPatient"
    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond3.jpg'
    Label:
        text: "[color=#000000][b]Information sur le patient[/b][/color]"
        markup: True
        color: 0, 0, 0
        pos_hint:{'x': .01, 'top':1.35}
        font_size: '30sp'

    TextInput:
        id: input1
        hint_text:'Civilité'
        pos_hint: {'center_x': 0.5, 'center_y': 0.7}
        size_hint: 0.30, 0.07
        multiline : False

    TextInput:
        id: input1
        hint_text:'Nom'
        pos_hint: {'center_x': 0.5, 'center_y': 0.62}
        size_hint: 0.30, 0.07
        multiline : False

    TextInput:
        id: input1
        hint_text:'Prenom'
        pos_hint: {'center_x': 0.5, 'center_y': 0.54}
        size_hint: 0.30, 0.07
        multiline : False

    TextInput:
        id: input1
        hint_text:'Date de naissance'
        pos_hint: {'center_x': 0.5, 'center_y': 0.46}
        size_hint: 0.30, 0.07
        multiline : False

    TextInput:
        id: input1
        hint_text:'maladie chronique'
        pos_hint: {'center_x': 0.5, 'center_y': 0.38}
        size_hint: 0.30, 0.07
        multiline : False

    MyButton:
        pos_hint:{'x': .15, 'top':.2}
        size_hint: .30, .07
        text: 'Retour'

        on_press:
            root.manager.transition.direction = "right"
            app.root.current = "renseignementPatient"

    MyButton:

        pos_hint:{'x': .60, 'top':.2}
        size_hint: .30, .07
        text: 'Valider'
        on_press:
            root.manager.transition.direction = "left"
            app.root.current = "constat"

<Constat>:
    name: "constat"
    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond4_bis1.png'
    Button:
        size_hint: .13, .13
        pos_hint:{'center_x': .87, 'top':.95}
        background_normal: '../image/plus.jpg'
        background_down: ''
        on_press :
            root.manager.transition.direction = "right"
            app.root.current = "main"
    Label:
        text: "[color=#000000]Que constatez-vous ?[/color]"
        markup: True
        color: 0, 0, 0
        pos_hint:{'x': .01, 'top':1.35}
        font_size: '30sp'

    MyButton:
        pos_hint:{'x': .37, 'top':.2}
        size_hint: .30, .07
        text: 'Valider'

        on_press:
            root.manager.transition.direction = "left"
            app.root.current = "maladieFind"


<MaladieFind>:
    name: "maladieFind"
    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond5.jpg'
    Button:
        size_hint: .13, .13
        pos_hint:{'center_x': .93, 'top':.97}
        background_normal: '../image/plus.jpg'
        background_down: ''
        on_press :
            root.manager.transition.direction = "right"
            app.root.current = "main"
    Label:
        halign: "center"
        text: "[color=#000000][b]Tableau des maladies résultant \ndes symptômes[/b][/color]"
        color: 0, 0, 0
        markup: True
        pos_hint:{'x': .01, 'top':1.35}
        font_size: '30sp'

    MyButton:
        pos_hint:{'center_x': .5, 'top':.2}
        size_hint: .30, .07
        text: 'Valider'
        bold: True

        on_press: app.root.current = "recapVisite"

<RecapVisite>:
    name: "recapVisite"

    canvas.before:
        Rectangle:
            size: root.size
            pos: root.pos
            source: '../image/fond5.jpg'
    Button:
        size_hint: .13, .13
        pos_hint:{'center_x': .93, 'top':.97}
        background_normal: '../image/plus.jpg'
        background_down: ''
        on_press :
            root.manager.transition.direction = "right"
            app.root.current = "main"
    Label:
        halign: "center"
        text: "[color=#000000][b]Récapitulatif de la visite[/b][/color]"
        color: 0, 0, 0
        markup: True
        pos_hint:{'x': .01, 'top':1.35}
        font_size: '30sp'

